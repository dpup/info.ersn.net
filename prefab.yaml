server:
  port: 8080

security:
  xFrameOptions: DENY  # X-Frame-Options header
  
  # CORS settings
  corsOrigins:
    - https://ersn.net
    - http://localhost:8080
  corsAllowedMethods:
    - GET
  corsAllowedHeaders:
    - x-csrf-protection
  corsAllowCredentials: true
  corsMaxAge: 72h
  
  # HSTS settings
  hstsExpiration: 31536000s
  hstsIncludeSubdomains: true
  hstsPreload: true

# App Config
roads:
  googleRoutes:
    refreshInterval: "5m"
    staleThreshold: "10m"
    apiKey: ""  # Set via PF__ROADS__GOOGLE_ROUTES__API_KEY env var
  caltrans_feeds:
    # TODO: Re-enable chain_controls in winter when actual chain requirement data is available
    chain_controls:
      refresh_interval: "30m"  # Less frequent, changes slowly (UNUSED - no winter data available)
      url: "https://quickmap.dot.ca.gov/data/cc.kml"
    lane_closures:
      refresh_interval: "10m"
      url: "https://quickmap.dot.ca.gov/data/lcs2way.kml"
    chp_incidents:
      refresh_interval: "5m"   # More frequent, incidents change quickly
      url: "https://quickmap.dot.ca.gov/data/chp-only.kml"
  openai:
    apiKey: ""                # Set via PF__ROADS__OPENAI__API_KEY env var
    model: "gpt-3.5-turbo"    # OpenAI model for alert enhancement
    timeout: "30s"            # Timeout for API calls
    maxRetries: 3             # Maximum retry attempts
  monitored_roads:
    - name: "Hwy 4"
      section: "Angels Camp to Murphys"
      id: "hwy4-angels-murphys"
      origin:
        latitude: 38.067400
        longitude: -120.540200
      destination:
        latitude: 38.139117
        longitude: -120.456111
    - name: "Hwy 4"
      section: "Murphys to Arnold"  
      id: "hwy4-murphys-arnold"
      origin:
        latitude: 38.139117
        longitude: -120.456111
      destination:
        latitude: 38.265006
        longitude: -120.333654
    - name: "Hwy 4"
      section: "Arnold to Bear Valley"
      id: "hwy4-arnold-bearvalley"
      origin:
        latitude: 38.265006
        longitude: -120.333654
      destination:
        latitude: 38.461045
        longitude: -120.042368
    - name: "101"
      section: "SF to Oakland"
      id: "101-sf-oakland"
      origin:
        latitude: 37.774929
        longitude: -122.419418
      destination:
        latitude: 37.792769
        longitude: -122.262866

weather:
  refreshInterval: "5m"
  staleThreshold: "10m"
  openweatherApiKey: ""  # Set via PF__WEATHER__OPENWEATHER_API_KEY env var
  locations:
    - id: "murphys"
      name: "Murphys, CA"
      lat: 38.139117
      lon: -120.456111
    - id: "arnold"  
      name: "Arnold, CA"
      lat: 38.265006
      lon: -120.333654
    - id: "dorrington"
      name: "Dorrington, CA"
      lat: 38.301275
      lon: -120.276705
    - id: "bearvalley"
      name: "Bear Valley, CA"
      lat: 38.461045
      lon: -120.042368