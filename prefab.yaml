server:
  port: 8080

security:
  xFrameOptions: DENY  # X-Frame-Options header
  
  # CORS settings
  corsOrigins:
    - https://ersn.net
    - http://localhost:8080
    - http://localhost:4321
  corsAllowedMethods:
    - GET
  corsAllowedHeaders:
    - x-csrf-protection
  corsAllowCredentials: true
  corsMaxAge: 72h
  
  # HSTS settings
  hstsExpiration: 31536000s
  hstsIncludeSubdomains: true
  hstsPreload: true

# Client Configurations - Top Level  
google_routes:
  apiKey: "" 

openai:
  apiKey: ""
  model: "gpt-4o-mini"       # OpenAI model for alert enhancement with JSON schema support
  timeout: "30s"             # Timeout for API calls
  maxRetries: 3              # Maximum retry attempts

openweather:
  apiKey: ""

# Service Configurations
roads:
  refreshInterval: "5m"
  staleThreshold: "10m"
  
  caltransFeeds:
    laneClosures:
      refreshInterval: "10m"
      url: "https://quickmap.dot.ca.gov/data/lcs2way.kml"
    chpIncidents:
      refreshInterval: "5m"   # More frequent, incidents change quickly
      url: "https://quickmap.dot.ca.gov/data/chp-only.kml"
    
  monitoredRoads:
    - name: "Hwy 4"
      section: "Angels Camp to Murphys"
      id: "hwy4-angels-murphys"
      origin:
        latitude: 38.067400
        longitude: -120.540200
      destination:
        latitude: 38.139117
        longitude: -120.456111
    - name: "Hwy 4"
      section: "Murphys to Arnold"  
      id: "hwy4-murphys-arnold"
      origin:
        latitude: 38.139117
        longitude: -120.456111
      destination:
        latitude: 38.265006
        longitude: -120.333654
    - name: "Hwy 4"
      section: "Arnold to Bear Valley"
      id: "hwy4-arnold-bearvalley"
      origin:
        latitude: 38.265006
        longitude: -120.333654
      destination:
        latitude: 38.461045
        longitude: -120.042368
    # Useful for testing because it is always busy and often has incidents.
    # - name: "101"
    #   section: "SF to Oakland"
    #   id: "101-sf-oakland"
    #   origin:
    #     latitude: 37.774929
    #     longitude: -122.419418
    #   destination:
    #     latitude: 37.792769
    #     longitude: -122.262866

weather:
  refreshInterval: "5m"
  staleThreshold: "10m"
  locations:
    - id: "murphys"
      name: "Murphys, CA"
      coordinates:
        latitude: 38.139117
        longitude: -120.456111
    - id: "arnold"  
      name: "Arnold, CA"
      coordinates:
        latitude: 38.265006
        longitude: -120.333654
    - id: "dorrington"
      name: "Dorrington, CA"
      coordinates:
        latitude: 38.301275
        longitude: -120.276705
    - id: "bearvalley"
      name: "Bear Valley, CA"
      coordinates:
        latitude: 38.461045
        longitude: -120.042368